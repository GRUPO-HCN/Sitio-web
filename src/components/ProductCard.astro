---
import type { Product } from '../data/products';
import { getBrandById } from '../data/products';

interface Props {
  product: Product;
}

const { product } = Astro.props;
const brand = getBrandById(product.brandId);
---

<article class="group relative flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white transition-all duration-300 hover:border-cyan-200 hover:shadow-lg hover:shadow-cyan-50">
  <!-- Badges -->
  <div class="absolute left-3 top-3 z-10 flex gap-1.5">
    {product.new && (
      <span class="rounded-full bg-cyan-500 px-2.5 py-0.5 text-xs font-semibold text-white">Nuevo</span>
    )}
    {product.featured && (
      <span class="rounded-full bg-gray-900 px-2.5 py-0.5 text-xs font-semibold text-white">Destacado</span>
    )}
  </div>

  <!-- Image -->
  <a href={`/productos/${product.slug}`} class="block aspect-square overflow-hidden bg-gray-50">
    <img
      src={product.images[0]}
      alt={product.name}
      width="400"
      height="400"
      loading="lazy"
      class="h-full w-full object-contain p-6 transition-transform duration-500 group-hover:scale-105"
    />
  </a>

  <!-- Info -->
  <div class="flex flex-1 flex-col p-4">
    {brand && (
      <span class="mb-1 text-xs font-medium uppercase tracking-wider text-cyan-600">{brand.name}</span>
    )}
    <h3 class="text-sm font-semibold text-gray-900 leading-snug">
      <a href={`/productos/${product.slug}`} class="after:absolute after:inset-0">
        {product.name}
      </a>
    </h3>
    <p class="mt-1 text-xs text-gray-500">{product.material} &middot; {product.size}</p>
    <div class="mt-3 pt-3 border-t border-gray-100">
      <span class="text-xs text-gray-400">SKU: {product.sku}</span>
    </div>
  </div>
</article>
